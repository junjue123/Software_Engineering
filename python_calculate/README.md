
# 计算器接口说明  

## 一、基本信息  
- **接口地址**：`http://localhost:5001/calculate`  
- **请求方法**：`GET`/`POST`  
- **响应格式**：JSON  

## 二、请求说明  
### （一）输入参数  
| 参数名      | 类型   | 是否必填 | 描述                                  |  
|-------------|--------|----------|---------------------------------------|  
| `expression`| string | 是       | 计算表达式（支持`+` `-` `*` `/`，如`"3+5*2"`） |  

### （二）请求示例  
#### 1. `GET` 请求  
```bash  
curl "http://localhost:5001/calculate?expression=3.5+2.1"  
```  

#### 2. `POST` 请求（JSON 格式）  
```bash  
curl -X POST -H "Content-Type: application/json" -d '{"expression": "5-1.5"}' http://localhost:5001/calculate  
```  

## 三、响应说明  
### （一）成功响应  
- **状态码**：`200`  
- **返回结果**：  
  ```json  
  {  
    "calculate_result": "float"  // 计算结果（保留4位小数）  
  }  
  ```  

### （二）错误响应  
| 错误类型               | 状态码   | 错误信息示例                     | 说明                                  |  
|------------------------|----------|----------------------------------|---------------------------------------|  
| 缺少必要参数           | `400`    | `{"error": "缺少必要参数: expression"}` | 未提供`expression`参数时返回           |  
| 表达式无效             | `400`    | `{"error": "表达式无效"}`         | 表达式为空或包含非法字符时返回         |  
| 计算错误               | `422`    | `{"error": "计算错误: 除数不能为零"}` | 除法运算中除数为0或操作符不合法时返回 |  
| 不支持的内容类型       | `415`    | `{"error": "不支持的请求内容类型，仅支持 application/json"}` | `POST`请求未使用JSON格式时返回 |  
| 内部服务器错误         | `500`    | `{"error": "内部服务器错误: **"}`  | 其他未预期的服务器错误                 |  

## 四、运算符说明  
支持以下运算符优先级：  
1. **乘除（`*` `/`）**：优先于加减计算  
2. **加减（`+` `-`）**：按从左到右顺序计算  

**示例**：  
- 表达式`"10-2*3"` → 计算顺序为`2*3=6`，再`10-6=4`，结果为`4.0`  
- 表达式`"6/2+3*4"` → 计算顺序为`6/2=3`、`3*4=12`，再`3+12=15`，结果为`15.0`